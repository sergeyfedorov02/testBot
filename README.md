# TelegramBotYouTube

## Описание
Телеграмм бот, который получает ссылку на YouTube (+хотя бы 2 таймстемпа), и возвращает gif-ку.

## Возможности
- **Получение gif-ки после отправления боту ссылки на видео и хотя бы двух валидных таймстепов согласно инструкции** - основной функционал проекта
- **Команда ```/start```** - старт и перезапуска бота, если что-то пошло не так. Будетс сформировано красивое привествие и высвечен список всех доступных команд.
  - Команда НЕ доступна во время формирования gif-ки, бот вышлет вам соответствующее сообщение.
- **Команда ```/help```** - получение информации о доступных боту команд в любой момент времени.
- **Команда ```/lastGIF```** - если вы до этого уже формировали какую-то gif-ку и бот вам ее прислал, то может получить ее еще раз при помощи этой команды. 
  - Если же вы попытаетесь ввести эту команду до ```/start``` или же до получения первой gif-ки в вашем диалоге, то бот сформирует соответствующее сообщение.
- **Команда ```/getInfoAboutVideo```** - получение информации о видео, ссылку на которое вы отправили в последний раз. 
  - Если же вы попытаетесь ввести эту команду до введения ссылки, то получите соответствующее сообщение от бота.
  - Команда доступна в любое время.
- **Команда ```/getInfoAboutYouTuber```** - получение информации о канале, на котором было размещено видео, ссылку на которое вы отправили в последний раз.
  - Если же вы попытаетесь ввести эту команду до введения ссылки, то получите соответствующее сообщение от бота.
  - Команда доступна в любое время.
- **Добавлены интерактивные кнопоки для ответа на вопрос бота** - после отправки ссылки вам будет предложено выбрать ответ на вопрос бота.
  - Если попытаетесь ввести какой-то текст без ответа на вопрос, то получите соответствующее сообщение от бота.
- **Добавлена возможность сформировать gif-ку при помощи новой ссылки** - если вы уже прислали ссылку и ответили на вопрос, но вдруг решили изменить видео, то просто нажмите на появившуюся кнопку ```Хочу ввести новую ссылку```.
- **Проверка правильности ввода** - бот будет контролировать ваш диалог с ним, и если вы введете что-то не так (например, значения таймстепов), то бот вам укажет на ошибку.
- **Ожидание gif-ки** - во время формирования gif-ки вам придется подождать, пока бот вышлет ее вам. В это время при вводе любого текста выполучите соответствующее сообщение от бота, а также вы не сможете воспользоваться командой ```/start```, но все другие команды будут доступны.
- **Валидация команд боту** - бот достаточно умный, поэтому если вы захотите ввести какую-то странную команду с абсолютно любым текстом, то бот подскажет вам, что не знает такой команды и предложит воспользоваться командой ```/help```.

## Запуск проекта
- Для начала требуется склонировать репозиторий:

```git clone https://github.com/sergeyfedorov02/TelegramBotYouTube.git```

- Потом следует выбрать один из видов запуска проекта, которые разобраны в главах ниже.
- После успешного запуска следует перейти в Telegram ```https://web-telegram.ru/```
- Создадим новый чат с нашим ботом, для этого найдите его по имени ```GIFfromYouTubebot```

![Find bot ](src/find_bot_telegram.PNG)

- Нажимаем на кнопку ```start``` и следуем инструкциям бота. Весь функционал описан в разделе ```Возможности```

### Обычный запуск проекта
Запутите проект в среде PyCharm путем выбора следующей папки (см. рис ниже):

![Open Project](src/open_project.PNG)

Затем настройте интерпретатор Python, для этого перейдите ```File->Settings->Project:TelegramBotForYouTube->Python Interpreter``` и выполните следующую настройку:

![Open Project](src/add_interpreter_1.PNG)

![Open Project](src/add_interpreter_2.PNG)

Теперь откройте файл ```main.py``` и на строке 244 запустите бота:

![Start Bot](src/start_bot.PNG)

Если при запуске возникли какие-то сбои, то для проверки перейдите в окно подключенных модулей и проверьте их в соответствии со следующим фото:

```File->Settings->Project:TelegramBotForYouTube->Python Interpreter```

![Packages](src/packages.PNG)

### Запуск проекта при помощи Docker
При помощи командной строки перейдите в папку проекта и проверьте наличие всех файлов:
```cd TelegramBotYouTube/TelegramBotForYouTube ```

![Docker Check Files](src/start_docker_1.PNG)

Теперь создайте образ при помощи следующей команды:
```sudo docker build -t dockerfile```

![Docker Build Image](src/start_docker_2.PNG)

После создания образа его следует запустить при помощи следующей команды:
```sudo docker run dockerfile```

![Docker Run Image](src/start_docker_3.PNG)

## Пример запуска проекта при помощи Docker

Для начала в соответствии с гайдом по запуску сделаем клонирование репозитория:

![Docker 1](src/docker_1.PNG)

Теперь перейдем в нужную папку и проверим ее содержимое:

![Docker 2](src/docker_2.PNG)

Создадим образ:

![Docker 3](src/docker_3.PNG)

Запустим созданный образ

![Docker 4](src/docker_4.PNG)

Теперь перейдем в Telegram и найдем нашего бота:

![Docker 5](src/docker_5.PNG)

Начнем работу:

![Docker 6](src/docker_6.PNG)

Вышлем ссылку на видео:

![Docker 7](src/docker_7.PNG)

Отвечаем на вопрос:

![Docker 8](src/docker_8.PNG)

Проверяем некоторые команды:

![Docker 9](src/docker_9.PNG)

Высылаем хотя бы 2 таймстепа:

![Docker 10](src/docker_10.PNG)

Ожидаем получения GIF-ки:

![Docker 11](src/docker_11.PNG)

Проверяем еще одну команду:

![Docker 12](src/docker_12.PNG)
